tilda_ma.receiveMessage=function(a){100<a.data.length&&(0<$(".tlk__reg-iframe-container").length?($(".tlk__reg-iframe-container").hide(),tilda_ma.submit_recover_form(a.data)):($(".tlk__signup-iframe-container").hide(),tilda_ma.submit_register_form(a.data)))};tilda_ma.closeCaptchaIframe=function(){$(".tlk-recaptcha-close").parent().css("display","none")};
tilda_ma.submit_recover_form=function(a){$(".tlk__reg-form-error-recover-password").hide();var c=$("#form_recover_password").serializeArray();c.push({name:"rkey",value:a});tilda_ma.request(tilda_ma.main_url+"set/recoverpass/",c,function(b){$(".tlk__reg-form-error-recover-password").removeClass("tlk__reg-form-recover-password-success");"ok"==b.status?($(".tlk__reg-form-recovery").hide(),$(".tlk__reg-form-recovery-success").show()):($(".tlk__reg-form-error-recover-password").text(b.error),$(".tlk__reg-form-error-recover-password").show(),
document.getElementsByTagName("iframe")[0].contentWindow.postMessage("tilda-reset","*"))})};
tilda_ma.submit_register_form=function(a){document.getElementsByTagName("iframe")[0].contentWindow.postMessage("tilda-reset","*");var c=$("#form_signup").serializeArray();c.push({name:"rkey",value:a});$(".tlk__signup-form-item").removeClass("tlk__signup-form-item-error");$(".tlk__signup-form-error").css("display","none");tilda_ma.request(tilda_ma.main_url+"set/signup/",c,function(b){if("ok"==b.status)"undefined"!=typeof b.profile&&(localStorage.clear(),localStorage.setItem("memberarea_profile",JSON.stringify(b.profile))),
document.location.replace("/members/");else{var a=$('.tlk__signup-form-error[data-tlk-signup-error="'+b.error.substring(0,2)+'"]');a.text(b.error.substring(4)).css("display","block");a.parents(".tlk__signup-form-item").addClass("tlk__signup-form-item-error")}})};window.addEventListener("message",tilda_ma.receiveMessage,!1);
$(function(){function a(){var d=$(".tlk__form-container"),a=+d.attr("data-gradient-start-opacity")/100||1;d=d.attr("data-gradient-start-color");if(0<d.length)return"rgba("+tilda_ma.hexToRgb(d).join(", ")+", "+a+")"}function c(){var a=$(".tlk__form-container"),b=+a.attr("data-gradient-end-opacity")/100||1;a=a.attr("data-gradient-end-color");if(0<a.length)return"rgba("+tilda_ma.hexToRgb(a).join(", ")+", "+b+")"}var b=document.location.href.split("/");"signup"==b[4]&&("group"==b[5]&&8<b[6].length?localStorage.setItem("regToGroup",
b[6]):localStorage.removeItem("regToGroup"));null!=localStorage.getItem("regToGroup")&&$('a[href="/members/signup"]').attr("href",$('a[href="/members/signup"]').attr("href")+"/group/"+localStorage.getItem("regToGroup"));$("#form_login").submit(function(a){a.preventDefault();tilda_ma.request(tilda_ma.main_url+"set/login/",$(this).serializeArray(),function(a){"ok"==a.status?("undefined"!=typeof a.profile&&(localStorage.clear(),localStorage.setItem("memberarea_profile",JSON.stringify(a.profile))),document.location.replace("/members/")):
($(".tlk__reg-form-error-all-registration").html(a.error),$(".tlk__reg-form-error-all-registration").show())})});$("body").on("submit","#form_recover_password",function(a){a.preventDefault();$(".tlk__reg-iframe-container").show();return!1});$("body").on("submit","#form_signup",function(a){a.preventDefault();$(".tlk__signup-iframe-container").show();return!1});if(1==$(".tlk__form-container").data("gradient")){$("#allrecords").append('<div class="tlk__bg-filter"></div>');b=void 0==a()&&void 0!=c()?
c():a();var e=void 0==c()&&void 0!=a()?a():c();$(".tlk__bg-filter").css("background-image","linear-gradient(to bottom, "+b+", "+e+")")}});
